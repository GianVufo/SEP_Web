@model ICollection<Sector>
@using SEP_Web.Models
@{
    ViewData["Title"] = "Setores";
}

<div class="p-3">

    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success" role="alert">
            <button type="button" class="btn btn-danger btn-sm close-alert" data-dismiss="modal" aria-label="Close">
                <span class="close-span" aria-hidden="true">&times;</span>
            </button>
            @TempData["SuccessMessage"]
        </div>
    }

    @if (TempData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger" role="alert">
            <button type="button" class="btn btn-danger btn-sm close-alert" data-dismiss="modal" aria-label="Close">
                <span class="close-span" aria-hidden="true">&times;</span>
            </button>
            @TempData["ErrorMessage"]
        </div>
    }

</div>

<div class="d-flex justify-content-start w-100">
    <button title="Cadastrar setor" style="width: 18vh;" type="button" data-bs-toggle="modal" data-bs-target="#sector-register" class="btn btn-primary d-flex justify-content-evenly btn-adm-register btn-md mb-3"><i class="bi bi-person-plus-fill"></i> Novo </button>
</div>

@* Modal de Registro  *@

    <div class="modal fade" id="sector-register" tabindex="-1" role="dialog" aria-labelledby="sector-registerTitle" aria-hidden="true">

        <div class="modal-dialog modal-dialog-centered" role="document">

            <div class="modal-content">

                <div class="modal-header p-3">
                    <h3 class="modal-title text-center mb-0 p-0" id="sector-registerTitle">Adicionar Setor</h3>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-1">
                    @await Html.PartialAsync("_Register.cshtml", new Sector())
                </div>

            </div>

        </div>

    </div>

@* Fim do Modal de Registro *@

<div class="table-responsive-md">

    <table id="sector-table" class="table table-style table-bordered table-striped table-light duo-table p-0">

        <thead class="table-dark">
            <tr>
                <th scope="col">Descrição</th>
                <th scope="col">Sessão</th>
                <th scope="col"></th>
            </tr>
        </thead>

        <tbody>

            
            @foreach (Sector sectors in Model)
            {
                var section = new Sector().SectionName(sectors);

                <tr>

                    <td scope="row">@sectors.Name</td>
                    <td scope="row">@await section</td>

                    <td scope="row">
                        <div class="btn-group" role="group" aria-label="Basic example">
                            <button type="button" data-bs-toggle="modal"
                                data-bs-target="#sector-edit-@sectors.Id"
                                class="btn btn-sm btn-outline-primary">Editar</button>
                            <button type="button" data-bs-toggle="modal" asp-route-id="@sectors.Id"
                                data-bs-target="#sector-delete-@sectors.Id"
                                class="btn btn-sm btn-outline-danger">Apagar</button>
                        </div>

                    </td>

                </tr>

                @* Modal de Edição *@

                    <div class="modal fade" id="sector-edit-@sectors.Id" tabindex="-1" role="dialog" aria-labelledby="sector-editTitle" aria-hidden="true">

                        <div class="modal-dialog modal-dialog-centered" role="document">

                            <div class="modal-content">
                                <div class="modal-header p-3">
                                    <h3 class="modal-title text-center mb-0 p-0" id="sector-editTitle">Editar setor</h3>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body p-1">
                                    @await Html.PartialAsync("_Edit.cshtml", sectors)
                                </div>
                            </div>

                        </div>

                    </div>

                @* Fim do Modal de Edição *@

                @* Modal de Exclusão *@

                    <div class="modal fade" id="sector-delete-@sectors.Id" tabindex="-1" role="dialog" aria-labelledby="sector-delete-Title" aria-hidden="true">

                        <div class="modal-dialog modal-dialog-centered" role="document">

                            <div class="modal-content">
                                <div class="modal-header p-3">
                                    <h3 class="modal-title text-danger text-center mb-0 p-0" id="sector-delete-Title">Alerta!</h3>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body p-1">
                                    @await Html.PartialAsync("_Delete.cshtml", sectors)
                                </div>
                            </div>

                        </div>

                    </div>

                @* Fim do Modal de Exclusão *@
            }

        </tbody>

    </table>

</div>